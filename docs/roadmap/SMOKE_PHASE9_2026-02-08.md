# Phase 9 Smoke Checklist (2026-02-08)

目标：验证 TASK-0901/TASK-0902/TASK-0903/TASK-0904 的关键链路（分组钻取、诊断包导出、历史筛选/保留、交接片段生成）可用。

## 自动化验证

- `pnpm -s typecheck`：通过
- `pnpm -s test`：通过（`9` 个测试文件，`33` 个用例）
  - 新增：`src/lib/__tests__/handoffSnippet.test.ts`
- `pnpm -s e2e`：通过（renderer smoke）
- `cd src-tauri && cargo test -q`：通过（`81` 个测试）

## 关键手工验收路径

### A. 失败分组钻取 + 诊断包导出（TASK-0901/TASK-0902）

1. 在“失败诊断聚合”中选择任意分组，确认“失败组详情”展示按完成时间倒序的记录列表。
2. 点击 `复制签名`、`复制代表命令`，确认剪贴板内容正确。
3. 点击 `导出诊断包`，分别导出 `.md` 和 `.json`，确认包含：签名、频次、代表记录、快照引用。

### B. 历史筛选 + 保留策略（TASK-0903）

1. 在“最近执行历史”分别设置 Provider/状态/关键词筛选，确认列表和计数实时变化。
2. 在设置中将“执行历史保留上限”调小（例如 8），确认历史列表立即裁剪且保持最新记录优先。
3. 重启应用后确认保留上限仍生效，并且历史操作（打开快照/重跑）不受影响。

### C. 成功记录交接片段（TASK-0904）

1. 在成功记录上点击 `复制 Shell 片段`，确认包含 provider/project/parameters 和可执行命令。
2. 点击 `复制 GHA 片段`，确认包含 `working-directory` 与 `run` 片段。
3. 将片段粘贴到本地脚本和 workflow 草稿，确认格式可直接复用。

## 结论

- Phase 9 任务已在代码实现、自动化验证和手工验收路径层面闭环。
- 当前阶段完成后，可进入下一阶段（如团队协作导出模板增强、历史时间窗口筛选）。
