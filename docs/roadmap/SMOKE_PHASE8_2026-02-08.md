# Phase 8 Smoke Checklist (2026-02-08)

目标：验证 TASK-0802/TASK-0803/TASK-0804 的核心链路（历史记录 -> 快照定位/重跑 -> 失败签名聚合）可用。

## 环境快照

- 日期：2026-02-08
- 机器：macOS (arm64)
- dotnet：`9.0.100`
- cargo：`1.92.0`
- go：`go1.25.6`
- java：未安装（`java -version` 失败）
- gradle：未安装（`gradle: not found`）

## 自动化验证

### 1) 前端类型与单测

- 命令：`pnpm -s typecheck`
- 结果：通过

- 命令：`pnpm -s test`
- 结果：通过（`7` 个测试文件，`27` 个用例）
  - 包含新增：`src/lib/__tests__/failureSignature.test.ts`
  - 覆盖：失败上下文提取、签名归一化、签名推导、已持久化签名回放

### 2) Rust 侧回归

- 命令：`cd src-tauri && cargo test -q`
- 结果：通过（`80` 个测试）

## Phase 8 关键验收路径（手工）

### A. 历史记录一键打开快照（TASK-0802）

1. 任意 Provider 执行成功后导出执行快照（Markdown 或 JSON）。
2. 在“最近执行历史”点击`打开快照`：
   - 当 `snapshotPath` 已存在：直接打开对应文件。
   - 当 `snapshotPath` 为空但 `outputDir` 存在：自动回退到目录内最新 `execution-snapshot-*` 文件。
3. 验证回填：回退成功后，记录写回 `snapshotPath`，下次点击直接命中。

### B. 历史记录一键重跑（TASK-0803）

1. 在“最近执行历史”点击`重新执行`。
2. 验证当前编辑器状态被恢复（Provider + 参数）。
3. 验证执行复用统一管道（环境检查 + 执行 + 日志流）。
4. 验证重跑结果作为新记录追加到历史时间线。

### C. 失败签名聚合诊断（TASK-0804）

1. 构造同类失败至少 2 次（例如重复缺少依赖/路径错误）。
2. 验证“失败诊断聚合”卡片中被归并为同一签名组：
   - 显示分组频次（最近 N 次）
   - 显示最新发生时间
3. 点击分组快捷操作：
   - `打开代表快照`：可定位最新代表记录的快照
   - `重跑代表记录`：可直接发起复验

## 结论

- Phase 8 的 3 个任务在代码与自动化校验层面均已闭环。
- 由于当前环境缺少 Java/Gradle，Java Provider 的同类失败分组建议在安装 JDK 17+ 后补充一次手工回归。
