# TASK-0103: Unified Logging + Error Taxonomy

Status: done
Owner: OpenClaw
Links:
- Commits: d5a1496, e4d88a9

## Context

As we introduce `PublishSpec` and `ExecutionPlan`, we need consistent logging and error shapes so that:
- the UI can show actionable failures
- tests can assert error classes
- future providers can plug in without inventing their own formats

## Goals

- Define an error taxonomy for planning/execution.
- Standardize how errors are surfaced across Tauri commands.
- Emit structured logs for plan compilation and execution boundaries.

## Non-Goals

- Full observability pipeline (metrics/traces).
- Overhauling every existing error immediately (we can migrate incrementally).

## Requirements

### Functional

- R1: Introduce `AppError` (or similar) with `kind`, `message`, `details`.
- R2: All publish-related commands return structured errors.
- R3: Compiler errors are mapped into taxonomy kinds.

### Non-Functional

- N1: Preserve human-readable text.
- N2: No leaking secrets/paths in logs beyond what is already required.

## Technical Design

- Add `src-tauri/src/errors.rs` with taxonomy enums.
- Add helpers to convert `anyhow::Error` / `thiserror` errors.
- Wire publish command path to use taxonomy.

## TDD Plan

- [ ] Unit tests for mapping compile errors -> taxonomy kinds.

## Acceptance Criteria

- [ ] AC1: `cargo test --manifest-path src-tauri/Cargo.toml` passes.
- [ ] AC2: Publish command path surfaces `kind` consistently.
