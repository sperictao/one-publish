# TASK-0903: History Filters + Retention Policy Settings

Status: done
Owner: OpenClaw
Links:
- PR: (tbd)

## Context

A fixed 20-item timeline is useful for recency but lacks configurable visibility and retention behavior.

## Goals

- Add history filtering by provider/status/time window/signature keyword
- Expose retention settings in preferences (max records)
- Keep local storage behavior deterministic and backward-compatible

## Non-Goals

- Remote archival service
- Multi-user policy management

## Delivered

- Added history filter controls in execution timeline
  - supports provider/status selectors and keyword search (signature/error/command/project path)
  - displays filtered count and empty-state feedback for quick diagnostics narrowing
- Added configurable execution history retention limit in settings
  - supports local preference range 5~200 with immediate UI trimming
  - persists through existing preference update pipeline
- Added deterministic retention trimming in Rust store layer
  - migrated from fixed constant to persisted `execution_history_limit`
  - trims history on load/update/append and keeps latest-first ordering stable

## Acceptance Criteria

- [x] AC1: User can filter timeline by provider/status and keyword
- [x] AC2: User can configure retention limit and changes persist locally
- [x] AC3: Retention trimming keeps latest records and does not break history actions
