# TASK-1104: Lightweight Approval Checklist Before Rerun

Status: done
Owner: OpenClaw
Links:
- PR: (tbd)

## Context

Rerun is convenient, but teams sometimes need a quick checklist to prevent accidental reruns on sensitive branches.

## Goals

- Add optional pre-rerun checklist gate
- Capture quick confirmations (branch/env/output target)
- Keep flow fast and dismissible for local development

## Non-Goals

- Policy engine
- Role-based authorization

## Delivered

- Added optional pre-rerun checklist switch in settings panel
  - can enable/disable locally without affecting other publish flows
  - persists preference in local storage for stable per-device behavior
- Added lightweight rerun confirmation dialog
  - appears before `重跑记录` when checklist is enabled
  - shows branch/environment/output target context and requires explicit confirmation for all three checks
- Preserved existing rerun recovery behavior
  - when checklist is disabled, rerun continues through original restore-and-run path
  - after confirmation, rerun still reuses existing spec extraction + editor restore logic
- Added unit tests for checklist preference persistence

## Acceptance Criteria

- [x] AC1: User can enable/disable pre-rerun checklist from settings
- [x] AC2: Checklist appears before rerun and requires explicit confirmation
- [x] AC3: Checklist state does not block existing rerun recovery logic
