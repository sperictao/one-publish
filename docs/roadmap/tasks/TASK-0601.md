# TASK-0601: Provider Selector + Context-Aware Diagnostics Bridge

Status: done
Owner: OpenClaw
Links:
- PR: (tbd)

## Context

Provider infrastructure already exists in backend (`dotnet/cargo/go/java`), but App-level context is still dotnet-hardcoded. Users cannot switch provider context when running environment diagnostics or command import.

## Goals

- Expose provider selector in main workflow
- Make environment diagnostics follow selected provider context
- Allow command import dialog to parse commands with selected provider id

## Non-Goals

- Implement generic multi-provider one-click execution in this task
- Implement full provider-specific form mapping in this task

## User Stories

- As a user, I want to switch active provider context, so diagnostics and tooling checks match my stack.
- As a user, I want command import to parse based on active provider, so I can start from existing commands.

## Requirements

### Functional

- R1: Add backend command to list provider manifests
- R2: Add frontend API to load provider list
- R3: Add provider selector in project card
- R4: Route environment checks and environment dialog defaults by selected provider
- R5: Route command import dialog provider id and path by selected provider context
- R6: Show explicit UX hint when non-dotnet provider is selected (execution not yet wired)

### Non-Functional

- N1: Keep dotnet publish behavior unchanged
- N2: Keep non-dotnet path safe (no fake execution)
- N3: Keep code changes minimal and isolated

## Technical Design

- Rust
  - `commands::list_providers`
  - `ProviderRegistry::manifests`
  - register invoke handler in `src-tauri/src/lib.rs`
- Frontend
  - `src/lib/store.ts`: `listProviders()` + `ProviderManifest`
  - `src/App.tsx`
    - add provider selector state
    - provider-aware environment check defaults
    - provider-aware command import wiring
    - non-dotnet bridge card with follow-up guidance

## Acceptance Criteria

- [x] AC1: User can switch provider from app main view
- [x] AC2: Environment check follows selected provider context
- [x] AC3: Command import uses selected provider id
- [x] AC4: Dotnet publish flow remains available and stable
- [x] AC5: Typecheck/tests/build pass
