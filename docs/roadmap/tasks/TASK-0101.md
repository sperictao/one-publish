# TASK-0101: PublishSpec Model (Language-Agnostic)

Status: doing
Owner: OpenClaw
Links:
- PR: (tbd)

## Context

We want to evolve OnePublish from a .NET publish GUI into a multi-language publishing product.
To do that without exploding UI complexity, we need a stable, language-agnostic spec that can be compiled into an execution plan.

## Goals

- Introduce a minimal `PublishSpec` data model that is language-agnostic.
- Provide JSON serialization for persistence, debugging, and future import/export.
- Define a deterministic "compile" step boundary (spec -> plan) (plan implementation is Task 0102).

## Non-Goals

- Implementing full execution plan semantics.
- Supporting multiple providers in this task.
- Migrating existing UI/commands to the new spec (we can do incremental wiring later).

## Requirements

### Functional

- R1: `PublishSpec` includes `provider_id`, `project_path`, and `parameters`.
- R2: `parameters` supports 100% expressiveness via a small set of primitives (string/bool/number/string list/map).
- R3: Spec can round-trip JSON (serde).

### Non-Functional

- N1: No IO in the model.
- N2: Model is stable and versioned to allow future migrations.

## Technical Design

- Location: `src-tauri/src/spec.rs`
- Types:
  - `PublishSpec { version, provider_id, project_path, parameters }`
  - `SpecValue` as an enum for primitives and structures

## TDD Plan

### Test cases

- [ ] JSON round-trip for a spec with nested `parameters`.
- [ ] `version` defaults/required behavior is explicit.

### Test types

- Unit: `cargo test`

## Acceptance Criteria

- [ ] AC1: New module compiles and is covered by at least 1 unit test.
- [ ] AC2: `cargo test --manifest-path src-tauri/Cargo.toml` passes.
