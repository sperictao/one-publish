# TASK-0704: Execution Snapshot Export (Spec + Command + Environment)

Status: done
Owner: OpenClaw
Links:
- PR: (tbd)

## Context

Preflight export exists for release operations, but generic provider execution lacks a focused run snapshot artifact for troubleshooting and handoff.

## Goals

- Export one execution snapshot containing spec, resolved command, provider, and environment summary
- Keep snapshot human-readable and machine-readable

## Non-Goals

- Remote upload/sync
- Full execution history database

## Delivered

- Added backend snapshot export command: `export_execution_snapshot`
  - accepts structured execution snapshot payload
  - supports `.json` and `.md` output formats
- Added markdown renderer for execution snapshot
  - includes generated time, provider, execution status, command line
  - includes environment summary (provider coverage + warning/critical counts)
  - includes spec/result JSON blocks and optional log section
- Added frontend snapshot export workflow in publish result panel
  - one-click “导出执行快照” action after provider run
  - supports Markdown/JSON file selection and default output path under publish output dir
- Added frontend snapshot payload assembly from runtime context
  - spec, command line, environment summary, result summary, and full log text
- Added backend unit test for markdown snapshot renderer core sections

## Acceptance Criteria

- [x] AC1: User can export snapshot after a provider run
- [x] AC2: Snapshot includes spec/provider/command/environment/result summary
- [x] AC3: Export supports markdown/json formats
