# TASK-0701: Java Execution Preconditions + Gradle Wrapper Fallback

Status: done
Owner: OpenClaw
Links:
- PR: (tbd)

## Context

Phase 6 introduced generic provider execution. In Java projects, execution plan defaults to `./gradlew build`, but some repositories do not ship wrapper scripts and should fallback to global `gradle` when available. Existing failure messages are not explicit enough.

## Goals

- Make Java execution preconditions explicit and actionable
- Prefer project wrapper script when present
- Fallback to global `gradle` if wrapper is absent

## Non-Goals

- Redesign Java provider schema
- Add project-aware environment checks to global diagnostics command

## Delivered

- Added `resolve_java_program()` in backend execution path
  - uses wrapper (`gradlew`/`gradlew.bat`) if present in working directory
  - falls back to global `gradle` when wrapper is absent
  - returns actionable error when neither wrapper nor global gradle exists
- Integrated Java program resolution into `execute_publish_spec` before process spawn
- Added unit tests for wrapper priority and missing project-dir error

## Acceptance Criteria

- [x] AC1: Java execution uses wrapper when wrapper script exists
- [x] AC2: Java execution can fallback to global `gradle`
- [x] AC3: Missing wrapper + missing gradle returns actionable error
- [x] AC4: Existing tests/build pass
