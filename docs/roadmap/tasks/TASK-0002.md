# TASK-0002: Frontend Unit Tests (Vitest) + First TDD Slice

Status: doing
Owner: OpenClaw
Links:
- PR: (commit in main)

## Context

To scale toward a commercial-grade product, we need fast feedback loops and deterministic tests for core UI logic.

## Goals

- Add a frontend unit test framework with JSDOM.
- Establish a standard test setup file and config.
- Add first tests using TDD, and adjust production code to be testable.

## Non-Goals

- Full coverage in this task.
- E2E tests (tracked in TASK-0004).

## Requirements

### Functional

- R1: `pnpm test` runs unit tests.
- R2: Baseline test demonstrates key module behavior.

### Non-Functional

- N1: Tests are fast (< 2s for this small suite).
- N2: Test-only hooks are explicitly marked.

## Technical Design

- Add `vitest` + `jsdom` + Testing Library.
- Add `vitest.config.ts` with `@` alias.
- Add `src/test/setup.ts` importing jest-dom.
- Add a small test-only helper in `useI18n` to set cache deterministically.

## TDD Plan

### Test cases

- [ ] When translation cache is empty, `t(key)` returns `key`.
- [ ] When cache contains nested objects, `t("a.b")` returns the string value.

### Test types

- Unit: vitest

## Acceptance Criteria

- [ ] AC1: `pnpm test` passes locally.
- [ ] AC2: At least 1 module has unit tests.
